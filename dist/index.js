(()=>{function p(e,t){return t?p(t,e%t):e}function x(e){return e.reduce((t,o)=>p(t,o))}function S(e){let t=[],o=[];typeof e=="undefined"||typeof e=="string"?console.error("VueAB: variations must be Array || Object"):Array.isArray(e)?e.forEach(n=>{if(n.data&&n.data.slot){let i=n.data.attrs?n.data.attrs.chance:NaN,a=parseInt(i)||1;t.push(n.data.slot),o.push(a)}}):e!==null&&typeof e=="object"&&Object.keys(e).forEach(n=>{t.push(n),o.push(parseInt(e[n])||1)});let r=o.length?x(o):1;return t.reduce((n,i,a)=>{let y=Math.round(o[a]/r);for(let d=0;d<y;d++)n.push(i);return n},[])}function _(e){let t=Math.floor(Math.random()*e.length);return e[t]}function c(e){let t=S(e);return _(t)}function l(e){return e*24*3600*1e3}function m(e){let t=document.cookie.split(";"),o=e.length;for(let r in t){let n=t[r].trim();if(n.substr(0,o)===e){let i=decodeURIComponent(n.slice(o+1));return JSON.parse(i)}}}function u(e,t,o){let r=new Date;r.setTime(r.getTime()+l(o));let n=`expires=${r.toUTCString()};path=/`;t=encodeURIComponent(JSON.stringify(t)),document.cookie=`${e}=${t};${n}`}function f(e,t){let o=new Date;o.setTime(o.getTime()+l(t));let r=JSON.parse(localStorage.getItem(e));return r&&r.expires>o.getTime()?r:null}function g(e,t,o){t.expiry=new Date().getTime()+l(o),localStorage.setItem(e,JSON.stringify(t))}var s={_store:null,name:"split-test",method:"cookie",expiry:30,_load(){return this.method==="cookie"?this._store=m(this.name)||{}:this.method==="localStorage"?this._store=f(this.name,this.expiry)||{}:(console.warn("VueA2B WARNING: No or invalid storage method. Data will not persist."),this._store={}),this._store},_save(){this.method==="cookie"?u(this.name,this._store,this.expiry):this.method==="localStorage"&&g(this.name,this._store,this.expiry)},get entry(){return this._store||this._load()},set entry({name:e,winner:t}){this._store===null&&this._load(),this._store[e]=t,this._save()}},h=(e,t)=>{let o=s.entry[e]||c(t);return s.entry={name:e,winner:o},o};var w={abtest:h,randomCandidate:c,install(e,t={}){if(t.storage){let o=t.storage;o.name&&(s.name=o.name),o.method&&(s.method=o.method),o.expiry&&(s.expiry=parseInt(o.expiry))}e.component(t.component||"split-test",{functional:!0,props:{always:String,name:String},render(o,r){let n=r.props.name||r.parent.$options.name;if(!n)throw"VueA2B Error: The test name is mandatory!";let i=r.slots(),a=r.props.always||s.entry[n]||c(r.children);return s.entry={name:n,winner:a},i[a]}}),e.mixin({beforeCreate(){this.$abtest=h}})}},I=w;})();
//# sourceMappingURL=index.js.map
